<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3Sum - LeetCode 15</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .problem-description {
            background-color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .visualization-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        .array-section {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }
        .array-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
            min-height: 80px;
            flex-wrap: wrap;
        }
        .array-element {
            min-width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #e9ecef;
            border: 2px solid #adb5bd;
            border-radius: 8px;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.3s ease;
            position: relative;
        }
        .array-element.fixed-pointer {
            background-color: #007bff;
            border-color: #0056b3;
            color: white;
            transform: scale(1.1);
        }
        .array-element.left-pointer {
            background-color: #28a745;
            border-color: #1e7e34;
            color: white;
            transform: scale(1.1);
        }
        .array-element.right-pointer {
            background-color: #dc3545;
            border-color: #c82333;
            color: white;
            transform: scale(1.1);
        }
        .array-element.triplet-found {
            background-color: #ffc107;
            border-color: #ff9800;
            color: black;
            transform: scale(1.15);
            animation: bounce 0.5s ease-in-out;
        }
        .array-element.processed {
            background-color: #6c757d;
            border-color: #495057;
            color: white;
            opacity: 0.7;
        }
        .pointer-label {
            position: absolute;
            top: -30px;
            font-size: 11px;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 4px;
            color: white;
        }
        .fixed-label {
            background-color: #007bff;
        }
        .left-label {
            background-color: #28a745;
        }
        .right-label {
            background-color: #dc3545;
        }
        .results-section {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }
        .triplet-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }
        .triplet {
            background-color: #d4edda;
            border: 2px solid #28a745;
            border-radius: 8px;
            padding: 10px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .triplet.new {
            animation: slideIn 0.5s ease-in-out;
        }
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .play-btn {
            background-color: #28a745;
            color: white;
        }
        .play-btn:hover {
            background-color: #218838;
        }
        .pause-btn {
            background-color: #ffc107;
            color: black;
        }
        .pause-btn:hover {
            background-color: #e0a800;
        }
        .reset-btn {
            background-color: #dc3545;
            color: white;
        }
        .reset-btn:hover {
            background-color: #c82333;
        }
        .step-btn {
            background-color: #17a2b8;
            color: white;
        }
        .step-btn:hover {
            background-color: #138496;
        }
        .algorithm-steps {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
            margin-bottom: 20px;
        }
        .step {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 4px solid #dee2e6;
        }
        .step.active {
            background-color: #fff3cd;
            border-left-color: #ffc107;
        }
        .step.completed {
            background-color: #d4edda;
            border-left-color: #28a745;
        }
        .state-info {
            background-color: #e9ecef;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: monospace;
        }
        .sample-inputs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        .sample-input {
            padding: 10px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .sample-input:hover {
            background-color: #5a6268;
        }
        .complexity-info {
            background-color: #d1ecf1;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #17a2b8;
            margin-bottom: 20px;
        }
        .legend {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 2px solid #adb5bd;
        }
        .input-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: end;
        }
        .input-group {
            flex: 1;
        }
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .input-group input {
            width: 100%;
            padding: 8px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 16px;
        }
        .run-btn {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            height: fit-content;
        }
        .run-btn:hover {
            background-color: #0056b3;
        }
        @keyframes bounce {
            0%, 100% { transform: scale(1.15); }
            50% { transform: scale(1.25); }
        }
        @keyframes slideIn {
            0% { transform: translateY(-20px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>3Sum - LeetCode 15</h1>
        
        <div class="problem-description">
            <h3>Problem Description:</h3>
            <p>Given an integer array <code>nums</code>, return all the triplets <code>[nums[i], nums[j], nums[k]]</code> such that <code>i != j</code>, <code>i != k</code>, and <code>j != k</code>, and <code>nums[i] + nums[j] + nums[k] == 0</code>.</p>
            <p>The solution set must not contain duplicate triplets.</p>
            <p><strong>Example:</strong> Input: nums = [-1,0,1,2,-1,-4] → Output: [[-1,-1,2],[-1,0,1]]</p>
        </div>

        <div class="complexity-info">
            <h4>Algorithm Complexity:</h4>
            <p><strong>Time Complexity:</strong> O(n²) - Outer loop O(n) with inner two-pointers O(n)</p>
            <p><strong>Space Complexity:</strong> O(1) - Not counting the output array</p>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background-color: #e9ecef; border-color: #adb5bd;"></div>
                <span>Unprocessed</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #007bff; border-color: #0056b3;"></div>
                <span>Fixed Pointer (i)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #28a745; border-color: #1e7e34;"></div>
                <span>Left Pointer</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #dc3545; border-color: #c82333;"></div>
                <span>Right Pointer</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #ffc107; border-color: #ff9800;"></div>
                <span>Triplet Found</span>
            </div>
        </div>

        <div class="input-section">
            <div class="input-group">
                <label for="arrayInput">Array (comma-separated):</label>
                <input type="text" id="arrayInput" value="-1,0,1,2,-1,-4" placeholder="e.g., -1,0,1,2,-1,-4">
            </div>
            <button class="run-btn" onclick="startVisualization()">Run</button>
        </div>

        <div class="sample-inputs">
            <button class="sample-input" onclick="loadSample([-1,0,1,2,-1,-4])">Sample 1: [-1,0,1,2,-1,-4]</button>
            <button class="sample-input" onclick="loadSample([0,1,1])">Sample 2: [0,1,1]</button>
            <button class="sample-input" onclick="loadSample([0,0,0])">Sample 3: [0,0,0]</button>
            <button class="sample-input" onclick="loadSample([-2,0,0,2,2])">Sample 4: [-2,0,0,2,2]</button>
        </div>

        <div class="visualization-container">
            <div class="array-section">
                <h3>Sorted Array with Three Pointers</h3>
                <div class="array-container" id="arrayContainer"></div>
            </div>
            
            <div class="results-section">
                <h3>Found Triplets</h3>
                <div class="triplet-container" id="tripletContainer"></div>
            </div>
        </div>

        <div class="state-info" id="stateInfo"></div>

        <div class="controls">
            <button class="play-btn" id="playBtn" onclick="playAnimation()">Play</button>
            <button class="pause-btn" id="pauseBtn" onclick="pauseAnimation()" style="display: none;">Pause</button>
            <button class="step-btn" onclick="stepForward()">Step Forward</button>
            <button class="step-btn" onclick="stepBackward()">Step Backward</button>
            <button class="reset-btn" onclick="resetAnimation()">Reset</button>
        </div>

        <div class="algorithm-steps">
            <h3>Algorithm Steps:</h3>
            <div class="step" id="step0">1. Sort the array to enable two-pointers technique</div>
            <div class="step" id="step1">2. For each element i, skip duplicates (avoid duplicate triplets)</div>
            <div class="step" id="step2">3. Use two pointers: left = i+1, right = n-1</div>
            <div class="step" id="step3">4. If sum > 0, move right pointer left; if sum < 0, move left pointer right</div>
            <div class="step" id="step4">5. If sum == 0, add triplet to result and skip duplicates</div>
        </div>
    </div>

    <script>
        let nums = [-1, 0, 1, 2, -1, -4];
        let sortedNums = [];
        let fixedPointer = -1;
        let leftPointer = -1;
        let rightPointer = -1;
        let isPlaying = false;
        let animationId = null;
        let step = 0;
        let steps = [];
        let foundTriplets = [];

        function loadSample(sampleArray) {
            nums = [...sampleArray];
            document.getElementById('arrayInput').value = nums.join(',');
            resetAnimation();
        }

        function initializeVisualization() {
            steps = [];
            foundTriplets = [];
            sortedNums = [...nums].sort((a, b) => a - b);
            
            // Initial step - show sorted array
            steps.push({
                type: 'init',
                fixedPointer: -1,
                leftPointer: -1,
                rightPointer: -1,
                description: `Sorted array: [${sortedNums.join(', ')}]`
            });
            
            // 3Sum algorithm simulation
            for (let i = 0; i < sortedNums.length && sortedNums[i] <= 0; i++) {
                // Skip duplicates for fixed pointer
                if (i === 0 || sortedNums[i] !== sortedNums[i - 1]) {
                    steps.push({
                        type: 'fix_pointer',
                        fixedPointer: i,
                        leftPointer: -1,
                        rightPointer: -1,
                        description: `Fix pointer at index ${i} (value: ${sortedNums[i]})`
                    });
                    
                    let left = i + 1;
                    let right = sortedNums.length - 1;
                    
                    steps.push({
                        type: 'init_pointers',
                        fixedPointer: i,
                        leftPointer: left,
                        rightPointer: right,
                        description: `Initialize left=${left}, right=${right}`
                    });
                    
                    while (left < right) {
                        const sum = sortedNums[i] + sortedNums[left] + sortedNums[right];
                        
                        steps.push({
                            type: 'calculate_sum',
                            fixedPointer: i,
                            leftPointer: left,
                            rightPointer: right,
                            sum: sum,
                            description: `Sum: ${sortedNums[i]} + ${sortedNums[left]} + ${sortedNums[right]} = ${sum}`
                        });
                        
                        if (sum < 0) {
                            steps.push({
                                type: 'move_left',
                                fixedPointer: i,
                                leftPointer: left,
                                rightPointer: right,
                                sum: sum,
                                description: `Sum ${sum} < 0, move left pointer right`
                            });
                            left++;
                        } else if (sum > 0) {
                            steps.push({
                                type: 'move_right',
                                fixedPointer: i,
                                leftPointer: left,
                                rightPointer: right,
                                sum: sum,
                                description: `Sum ${sum} > 0, move right pointer left`
                            });
                            right--;
                        } else {
                            const triplet = [sortedNums[i], sortedNums[left], sortedNums[right]];
                            foundTriplets.push(triplet);
                            
                            steps.push({
                                type: 'found_triplet',
                                fixedPointer: i,
                                leftPointer: left,
                                rightPointer: right,
                                sum: sum,
                                triplet: triplet,
                                description: `Found triplet: [${triplet.join(', ')}]`
                            });
                            
                            // Skip duplicates
                            left++;
                            right--;
                            while (left < right && sortedNums[left] === sortedNums[left - 1]) {
                                steps.push({
                                    type: 'skip_duplicate',
                                    fixedPointer: i,
                                    leftPointer: left,
                                    rightPointer: right,
                                    description: `Skip duplicate at left pointer`
                                });
                                left++;
                            }
                        }
                    }
                } else {
                    steps.push({
                        type: 'skip_duplicate_fixed',
                        fixedPointer: i,
                        leftPointer: -1,
                        rightPointer: -1,
                        description: `Skip duplicate fixed pointer at index ${i} (value: ${sortedNums[i]})`
                    });
                }
            }
            
            steps.push({
                type: 'complete',
                fixedPointer: -1,
                leftPointer: -1,
                rightPointer: -1,
                description: `Algorithm complete! Found ${foundTriplets.length} unique triplets`
            });
            
            updateVisualization();
        }

        function updateVisualization() {
            updateArrayDisplay();
            updateTripletDisplay();
            updateStateInfo();
            updateSteps();
        }

        function updateArrayDisplay() {
            const container = document.getElementById('arrayContainer');
            container.innerHTML = '';
            
            sortedNums.forEach((num, index) => {
                const element = document.createElement('div');
                element.className = 'array-element';
                element.textContent = num;
                
                if (step > 0 && steps[step-1]) {
                    const currentStep = steps[step-1];
                    
                    if (currentStep.fixedPointer === index) {
                        element.classList.add('fixed-pointer');
                        const label = document.createElement('div');
                        label.className = 'pointer-label fixed-label';
                        label.textContent = 'i';
                        element.appendChild(label);
                    }
                    
                    if (currentStep.leftPointer === index) {
                        element.classList.add('left-pointer');
                        const label = document.createElement('div');
                        label.className = 'pointer-label left-label';
                        label.textContent = 'L';
                        element.appendChild(label);
                    }
                    
                    if (currentStep.rightPointer === index) {
                        element.classList.add('right-pointer');
                        const label = document.createElement('div');
                        label.className = 'pointer-label right-label';
                        label.textContent = 'R';
                        element.appendChild(label);
                    }
                    
                    if (currentStep.type === 'found_triplet' && 
                        (index === currentStep.fixedPointer || index === currentStep.leftPointer || index === currentStep.rightPointer)) {
                        element.classList.add('triplet-found');
                    }
                    
                    if (currentStep.fixedPointer > index) {
                        element.classList.add('processed');
                    }
                }
                
                container.appendChild(element);
            });
        }

        function updateTripletDisplay() {
            const container = document.getElementById('tripletContainer');
            
            if (step === 0) {
                container.innerHTML = '<div style="color: #6c757d; text-align: center;">No triplets found yet...</div>';
                return;
            }
            
            const currentStep = steps[step-1];
            let tripletsToShow = [];
            
            // Collect all triplets up to current step
            for (let i = 0; i < step; i++) {
                if (steps[i].type === 'found_triplet') {
                    tripletsToShow.push(steps[i].triplet);
                }
            }
            
            if (tripletsToShow.length === 0) {
                container.innerHTML = '<div style="color: #6c757d; text-align: center;">No triplets found yet...</div>';
                return;
            }
            
            container.innerHTML = '';
            tripletsToShow.forEach((triplet, index) => {
                const tripletElement = document.createElement('div');
                tripletElement.className = 'triplet';
                tripletElement.textContent = `[${triplet.join(', ')}]`;
                
                // Add animation for newly found triplet
                if (currentStep.type === 'found_triplet' && index === tripletsToShow.length - 1) {
                    tripletElement.classList.add('new');
                }
                
                container.appendChild(tripletElement);
            });
        }

        function updateStateInfo() {
            const stateInfo = document.getElementById('stateInfo');
            
            if (step === 0) {
                stateInfo.innerHTML = `
                    <strong>Algorithm State:</strong><br>
                    Original Array: [${nums.join(', ')}]<br>
                    Sorted Array: [${sortedNums.join(', ')}]<br>
                    Fixed Pointer (i): not set<br>
                    Left Pointer: not set<br>
                    Right Pointer: not set<br>
                    Current Sum: not calculated<br>
                    Found Triplets: 0<br>
                    Status: Ready to start
                `;
            } else if (step > 0 && steps[step-1]) {
                const currentStep = steps[step-1];
                const tripletCount = foundTriplets.length;
                
                stateInfo.innerHTML = `
                    <strong>Algorithm State:</strong><br>
                    Original Array: [${nums.join(', ')}]<br>
                    Sorted Array: [${sortedNums.join(', ')}]<br>
                    Fixed Pointer (i): ${currentStep.fixedPointer >= 0 ? `${currentStep.fixedPointer} (value: ${sortedNums[currentStep.fixedPointer]})` : 'not set'}<br>
                    Left Pointer: ${currentStep.leftPointer >= 0 ? `${currentStep.leftPointer} (value: ${sortedNums[currentStep.leftPointer]})` : 'not set'}<br>
                    Right Pointer: ${currentStep.rightPointer >= 0 ? `${currentStep.rightPointer} (value: ${sortedNums[currentStep.rightPointer]})` : 'not set'}<br>
                    Current Sum: ${currentStep.sum !== undefined ? currentStep.sum : 'not calculated'}<br>
                    Found Triplets: ${tripletCount}<br>
                    Status: ${currentStep.type === 'complete' ? 'COMPLETE!' : 'Processing...'}
                `;
            }
        }

        function updateSteps() {
            for (let i = 0; i < 5; i++) {
                const stepElement = document.getElementById(`step${i}`);
                stepElement.classList.remove('active', 'completed');
                
                if (step === 0 && i === 0) {
                    stepElement.classList.add('active');
                } else if (step > 0 && steps[step-1]) {
                    const currentStep = steps[step-1];
                    if (currentStep.type === 'init' && i === 0) {
                        stepElement.classList.add('completed');
                    } else if ((currentStep.type === 'fix_pointer' || currentStep.type === 'skip_duplicate_fixed') && i === 1) {
                        stepElement.classList.add('active');
                    } else if (currentStep.type === 'init_pointers' && i === 2) {
                        stepElement.classList.add('active');
                    } else if ((currentStep.type === 'calculate_sum' || currentStep.type === 'move_left' || currentStep.type === 'move_right') && i === 3) {
                        stepElement.classList.add('active');
                    } else if ((currentStep.type === 'found_triplet' || currentStep.type === 'skip_duplicate') && i === 4) {
                        stepElement.classList.add('active');
                    } else if (i < getCurrentStepNumber()) {
                        stepElement.classList.add('completed');
                    }
                }
            }
        }

        function getCurrentStepNumber() {
            if (step === 0) return 0;
            const currentStep = steps[step-1];
            switch (currentStep.type) {
                case 'init': return 1;
                case 'fix_pointer': case 'skip_duplicate_fixed': return 2;
                case 'init_pointers': return 3;
                case 'calculate_sum': case 'move_left': case 'move_right': return 4;
                case 'found_triplet': case 'skip_duplicate': return 5;
                case 'complete': return 5;
                default: return 1;
            }
        }

        function playAnimation() {
            if (!isPlaying) {
                isPlaying = true;
                document.getElementById('playBtn').style.display = 'none';
                document.getElementById('pauseBtn').style.display = 'inline-block';
                
                animationId = setInterval(() => {
                    if (step >= steps.length) {
                        pauseAnimation();
                        return;
                    }
                    stepForward();
                }, 1500);
            }
        }

        function pauseAnimation() {
            isPlaying = false;
            document.getElementById('playBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').style.display = 'none';
            
            if (animationId) {
                clearInterval(animationId);
                animationId = null;
            }
        }

        function stepForward() {
            if (step < steps.length) {
                step++;
                updateVisualization();
            }
        }

        function stepBackward() {
            if (step > 0) {
                step--;
                updateVisualization();
            }
        }

        function resetAnimation() {
            pauseAnimation();
            step = 0;
            foundTriplets = [];
            initializeVisualization();
        }

        function startVisualization() {
            const arrayInput = document.getElementById('arrayInput').value;
            
            try {
                nums = arrayInput.split(',').map(n => parseInt(n.trim()));
                
                if (nums.length < 3) {
                    alert('Array must have at least 3 elements');
                    return;
                }
                
                resetAnimation();
            } catch (error) {
                alert('Invalid input format. Please use comma-separated numbers.');
            }
        }

        // Initialize the visualization
        resetAnimation();
    </script>
</body>
</html>