<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LeetCode 78: Subsets - Visualizer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            border: 1px solid #e5e7eb;
        }
        
        /* Component Specific Styling */
        .code-block {
            background-color: #1f2937;
            color: #d1d5db;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-size: 0.875rem;
        }
        .code-block .comment {
            color: #6ee7b7;
        }
        .visualization-container {
            width: 100%;
            min-height: 300px;
            background-color: #f9fafb;
            border-radius: 0.5rem;
            padding: 1rem;
            overflow: auto;
            border: 1px solid #e5e7eb;
        }
        .controls-container {
            margin-bottom: 1rem;
        }
        .controls-container input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            box-sizing: border-box;
        }
        .controls-container button {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            background-color: #4f46e5;
            color: white;
            border: none;
        }
        .execution-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .icon-btn {
            background-color: #e5e7eb;
            border-radius: 9999px;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
            transition: background-color 0.2s;
        }
        .icon-btn:hover {
            background-color: #d1d5db;
        }
        .icon-btn svg {
            width: 1.5rem;
            height: 1.5rem;
        }
        .play-pause-btn {
            background-color: #4f46e5;
            color: white;
            width: 4rem;
            height: 4rem;
        }
        .play-pause-btn:hover {
            background-color: #4338ca;
        }
        .log-console {
            width: 100%;
            height: 160px;
            background-color: #111827;
            color: #d1d5db;
            font-family: 'SF Mono', 'Courier New', monospace;
            font-size: 0.875rem;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-y: auto;
            box-sizing: border-box;
        }
        .algorithm-state .state-display {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            text-align: center;
        }
        .state-display div p:first-child {
            font-size: 0.875rem;
            color: #6b7280;
        }
         .state-display div p:last-child {
            font-size: 1.5rem;
            font-weight: 700;
        }
        .results-container {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
        }
        .result-subset {
            display: inline-block;
            background-color: #dbeafe;
            color: #1e40af;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            margin: 0.25rem;
            font-family: 'SF Mono', 'Courier New', monospace;
        }
        .tree-node circle {
            fill: white;
            stroke-width: 2;
            transition: all 0.3s ease-in-out;
        }
        .tree-node text {
            text-anchor: middle;
            font-size: 12px;
            font-weight: bold;
            pointer-events: none;
        }
        .tree-node.active > circle {
            fill: #fef9c3; /* yellow-100 */
            stroke: #f59e0b; /* amber-500 */
            stroke-width: 3;
        }
        .tree-node.backtracked > circle {
            fill: #e5e7eb; /* gray-200 */
            stroke: #6b7280; /* gray-500 */
        }
        .tree-node.initial > circle {
            fill: #dbeafe; /* blue-100 */
            stroke: #3b82f6; /* blue-500 */
        }
        .tree-edge {
            stroke: #9ca3af;
            stroke-width: 2;
        }
        .skipped-edge {
            stroke: #ef4444;
            stroke-width: 2;
            stroke-dasharray: 5,5;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <!-- Header Section -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-white mb-2">LeetCode 78: Subsets</h1>
            <p class="text-xl text-blue-100 mb-2">An Interactive Visual Explainer</p>
            <p class="text-sm text-blue-200">Idea By: Chetan Pachpande | Executed By: Claude</p>
        </div>

        <!-- Navigation -->
        <div class="mb-6">
            <a href="../../index.html" class="inline-block bg-white bg-opacity-20 text-white px-6 py-2 rounded-lg hover:bg-opacity-30 transition duration-300 backdrop-blur-sm border border-white border-opacity-30">
                ← Back to Home
            </a>
        </div>

        <div id="problem-card" class="card">
            <h2 class="text-2xl font-bold mb-4">Problem Description</h2>
            <div class="space-y-4 text-gray-700">
                <p>Given an array <code>nums</code> of unique integers, return all possible subsets of <code>nums</code>.</p>
                <p>The solution set must not contain duplicate subsets. You may return the solution in any order.</p>
                
                <div class="bg-gray-100 p-4 rounded-lg text-sm">
                    <p><strong>Example 1:</strong></p>
                    <p><strong>Input:</strong> nums = [1,2,3]</p>
                    <p><strong>Output:</strong> [[],[1],[2],[1,2],[3],[1,3],[2,3],[1,2,3]]</p>
                    <br>
                    <p><strong>Example 2:</strong></p>
                    <p><strong>Input:</strong> nums = [7]</p>
                    <p><strong>Output:</strong> [[],[7]]</p>
                    <br>
                    <p><strong>Constraints:</strong></p>
                    <ul class="list-disc list-inside ml-4">
                        <li>1 <= nums.length <= 10</li>
                        <li>-10 <= nums[i] <= 10</li>
                    </ul>
                </div>
                
                <div class="mt-6">
                    <h3 class="text-xl font-semibold mb-2">Algorithm</h3>
                    <p>We use backtracking to generate all possible subsets. For each element, we have two choices:</p>
                    <ol class="list-decimal list-inside space-y-1 text-sm">
                        <li><strong>Include</strong> the current element in our subset</li>
                        <li><strong>Skip</strong> the current element and move to the next</li>
                    </ol>
                    <p class="mt-2">At each position, we add the current subset to our result, then recursively explore both options.</p>
                </div>
                
                <div class="mt-6">
                    <h3 class="text-xl font-semibold mb-2">Complexity Analysis</h3>
                    <p><strong>Time Complexity:</strong> <code>O(N × 2^N)</code><br><span class="text-sm text-gray-600">We generate 2^N subsets, and each subset takes O(N) time to copy</span></p>
                    <p class="mt-2"><strong>Space Complexity:</strong> <code>O(N × 2^N)</code><br><span class="text-sm text-gray-600">Space for storing all subsets and recursion stack depth O(N)</span></p>
                </div>
            </div>
        </div>

        <!-- Main Content Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Left Column: Controls and Code -->
            <div class="space-y-6">
                <!-- Input Controls -->
                <div class="card">
                    <h2 class="text-2xl font-bold mb-4">Input & Controls</h2>
                    <div class="controls-container">
                        <label for="array-input" class="block text-sm font-medium text-gray-700 mb-2">
                            Array (comma-separated):
                        </label>
                        <input type="text" id="array-input" value="1,2,3" class="mb-4">
                        <button id="run-btn" class="w-full">Generate Subsets</button>
                    </div>
                </div>

                <!-- Algorithm State -->
                <div class="card algorithm-state">
                    <h2 class="text-2xl font-bold mb-4">Algorithm State</h2>
                    <div class="state-display">
                        <div>
                            <p>Current Index</p>
                            <p id="current-index">0</p>
                        </div>
                        <div>
                            <p>Current Subset</p>
                            <p id="current-subset">[]</p>
                        </div>
                    </div>
                </div>

                <!-- Step-by-Step Code -->
                <div class="card">
                    <h2 class="text-2xl font-bold mb-4">Step-by-Step Code</h2>
                    <div id="code-steps" class="space-y-4">
                        <div class="code-step">
                            <h3 class="text-lg font-semibold text-blue-600">Step 1: Main Function</h3>
                            <div class="code-block">
                                <div class="comment">// Step 1: Initialize result list and start backtracking</div>
                                <div>public List&lt;List&lt;Integer&gt;&gt; subsets(int[] nums) {</div>
                                <div>    List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();</div>
                                <div>    generateSubsets(0, nums, new ArrayList&lt;&gt;(), result);</div>
                                <div>    return result;</div>
                                <div>}</div>
                            </div>
                            <p class="text-sm text-gray-600 mt-2">Initialize the result list and call the recursive helper function starting from index 0.</p>
                        </div>

                        <div class="code-step">
                            <h3 class="text-lg font-semibold text-blue-600">Step 2: Add Current Subset</h3>
                            <div class="code-block">
                                <div class="comment">// Step 2: Add current subset to result</div>
                                <div>private void generateSubsets(int index, int[] nums, List&lt;Integer&gt; current, List&lt;List&lt;Integer&gt;&gt; result) {</div>
                                <div>    result.add(new ArrayList&lt;&gt;(current));</div>
                            </div>
                            <p class="text-sm text-gray-600 mt-2">Add the current subset to our result. This includes the empty set initially.</p>
                        </div>

                        <div class="code-step">
                            <h3 class="text-lg font-semibold text-blue-600">Step 3: Iterate Through Remaining Elements</h3>
                            <div class="code-block">
                                <div class="comment">// Step 3: For each remaining element, decide to include or skip</div>
                                <div>    for (int i = index; i &lt; nums.length; i++) {</div>
                            </div>
                            <p class="text-sm text-gray-600 mt-2">Loop through all elements starting from the current index.</p>
                        </div>

                        <div class="code-step">
                            <h3 class="text-lg font-semibold text-blue-600">Step 4: Include Element</h3>
                            <div class="code-block">
                                <div class="comment">// Step 4: Include current element in subset</div>
                                <div>        current.add(nums[i]);</div>
                            </div>
                            <p class="text-sm text-gray-600 mt-2">Add the current element to our working subset.</p>
                        </div>

                        <div class="code-step">
                            <h3 class="text-lg font-semibold text-blue-600">Step 5: Recursive Call</h3>
                            <div class="code-block">
                                <div class="comment">// Step 5: Recursively generate subsets with this element included</div>
                                <div>        generateSubsets(i + 1, nums, current, result);</div>
                            </div>
                            <p class="text-sm text-gray-600 mt-2">Recursively call with the next index to explore all subsets including this element.</p>
                        </div>

                        <div class="code-step">
                            <h3 class="text-lg font-semibold text-blue-600">Step 6: Backtrack</h3>
                            <div class="code-block">
                                <div class="comment">// Step 6: Backtrack - remove element to explore other possibilities</div>
                                <div>        current.remove(current.size() - 1);</div>
                                <div>    }</div>
                                <div>}</div>
                            </div>
                            <p class="text-sm text-gray-600 mt-2">Remove the element (backtrack) to explore subsets without this element.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Visualization -->
            <div class="space-y-6">
                <!-- Tree Visualization -->
                <div class="card">
                    <h2 class="text-2xl font-bold mb-4">Recursion Tree</h2>
                    <div class="visualization-container">
                        <svg id="tree-svg" width="100%" height="400"></svg>
                    </div>
                    
                    <!-- Execution Controls -->
                    <div class="execution-controls">
                        <button id="prev-btn" class="icon-btn">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                        </button>
                        <button id="play-btn" class="play-pause-btn">
                            <svg id="play-icon" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <svg id="pause-icon" fill="currentColor" viewBox="0 0 24 24" style="display: none;">
                                <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                            </svg>
                        </button>
                        <button id="next-btn" class="icon-btn">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Results -->
                <div class="card">
                    <h2 class="text-2xl font-bold mb-4">Generated Subsets</h2>
                    <div id="results" class="results-container">
                        <!-- Results will be populated here -->
                    </div>
                </div>

                <!-- Execution Log -->
                <div class="card">
                    <h2 class="text-2xl font-bold mb-4">Execution Log</h2>
                    <div id="log" class="log-console">
                        <!-- Log messages will appear here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Full Java Code -->
        <div class="card mt-8">
            <h2 class="text-2xl font-bold mb-4">Complete Java Solution</h2>
            <div class="code-block">
                <div class="comment">// Most asked problems at FAANG companies: https://docs.google.com/spreadsheets/d/1hzP8j7matoUiJ15N-RhsL5Dmig8_E3aP/edit#gid=1377915986</div>
                <br>
                <div class="comment">// Leetcode Link: https://leetcode.com/problems/subsets/</div>
                <br>
                <div class="comment">// Video Solution: https://www.youtube.com/watch?v=OQKWzRJYtwg</div>
                <br>
                <div class="comment">//**************** Java Solution ***********************</div>
                <br>
                <div>class Solution {</div>
                <div class="comment">    // Step 1: Main function that initializes the result and starts backtracking</div>
                <div>    public List&lt;List&lt;Integer&gt;&gt; subsets(int[] nums) {</div>
                <div>        List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();</div>
                <div>        generateSubsets(0, nums, new ArrayList&lt;&gt;(), result);</div>
                <div>        return result;</div>
                <div>    }</div>
                <br>
                <div class="comment">    // Step 2-6: Recursive backtracking function</div>
                <div>    private void generateSubsets(int index, int[] nums, List&lt;Integer&gt; current, List&lt;List&lt;Integer&gt;&gt; result) {</div>
                <div class="comment">        // Step 2: Add current subset to result (includes empty subset initially)</div>
                <div>        result.add(new ArrayList&lt;&gt;(current));</div>
                <div class="comment">        // Step 3: Iterate through remaining elements starting from 'index'</div>
                <div>        for (int i = index; i &lt; nums.length; i++) {</div>
                <div class="comment">            // Step 4: Include current element in the subset</div>
                <div>            current.add(nums[i]);</div>
                <div class="comment">            // Step 5: Recursively generate subsets with this element included</div>
                <div>            generateSubsets(i + 1, nums, current, result);</div>
                <div class="comment">            // Step 6: Backtrack - remove element to explore other possibilities</div>
                <div>            current.remove(current.size() - 1);</div>
                <div>        }</div>
                <div>    }</div>
                <div>}</div>
            </div>
        </div>
    </div>

    <script>
        class SubsetsVisualizer {
            constructor() {
                this.nums = [];
                this.result = [];
                this.steps = [];
                this.currentStep = 0;
                this.isPlaying = false;
                this.playInterval = null;
                
                this.initializeElements();
                this.setupEventListeners();
                this.generateVisualization();
            }

            initializeElements() {
                this.arrayInput = document.getElementById('array-input');
                this.runBtn = document.getElementById('run-btn');
                this.playBtn = document.getElementById('play-btn');
                this.prevBtn = document.getElementById('prev-btn');
                this.nextBtn = document.getElementById('next-btn');
                this.playIcon = document.getElementById('play-icon');
                this.pauseIcon = document.getElementById('pause-icon');
                this.treeSvg = document.getElementById('tree-svg');
                this.results = document.getElementById('results');
                this.log = document.getElementById('log');
                this.currentIndex = document.getElementById('current-index');
                this.currentSubset = document.getElementById('current-subset');
            }

            setupEventListeners() {
                this.runBtn.addEventListener('click', () => this.generateVisualization());
                this.playBtn.addEventListener('click', () => this.togglePlay());
                this.prevBtn.addEventListener('click', () => this.previousStep());
                this.nextBtn.addEventListener('click', () => this.nextStep());
            }

            generateVisualization() {
                this.nums = this.arrayInput.value.split(',').map(x => parseInt(x.trim())).filter(x => !isNaN(x));
                this.result = [];
                this.steps = [];
                this.currentStep = 0;
                
                this.logMessage('Starting subset generation...');
                this.generateSubsets(0, [], 0, 0);
                this.renderStep();
            }

            generateSubsets(index, current, x, y, nodeId = 0) {
                // Record the step
                this.steps.push({
                    index,
                    current: [...current],
                    action: 'add_subset',
                    subset: [...current],
                    nodeId,
                    x, y
                });

                // Add current subset to result
                this.result.push([...current]);

                // For each remaining element
                for (let i = index; i < this.nums.length; i++) {
                    // Include element
                    current.push(this.nums[i]);
                    
                    this.steps.push({
                        index: i,
                        current: [...current],
                        action: 'include',
                        element: this.nums[i],
                        nodeId: this.steps.length,
                        x: x + (i - index + 1) * 100,
                        y: y + 80
                    });

                    // Recursive call
                    this.generateSubsets(i + 1, current, x + (i - index + 1) * 100, y + 80, this.steps.length - 1);

                    // Backtrack
                    current.pop();
                    
                    this.steps.push({
                        index: i,
                        current: [...current],
                        action: 'backtrack',
                        element: this.nums[i],
                        nodeId: this.steps.length,
                        x, y
                    });
                }
            }

            renderStep() {
                if (this.currentStep >= this.steps.length) return;
                
                const step = this.steps[this.currentStep];
                
                // Update algorithm state
                this.currentIndex.textContent = step.index;
                this.currentSubset.textContent = `[${step.current.join(', ')}]`;
                
                // Update log
                let message = '';
                switch (step.action) {
                    case 'add_subset':
                        message = `Add subset [${step.subset.join(', ')}] to result`;
                        break;
                    case 'include':
                        message = `Include element ${step.element} in subset`;
                        break;
                    case 'backtrack':
                        message = `Backtrack: remove element ${step.element}`;
                        break;
                }
                this.logMessage(message);
                
                // Update tree visualization
                this.updateTree();
                
                // Update results
                this.updateResults();
                
                // Update button states
                this.prevBtn.disabled = this.currentStep === 0;
                this.nextBtn.disabled = this.currentStep >= this.steps.length - 1;
            }

            updateTree() {
                this.treeSvg.innerHTML = '';
                
                // Calculate tree dimensions
                const maxNodes = Math.pow(2, this.nums.length);
                const width = Math.max(600, maxNodes * 30);
                const height = (this.nums.length + 1) * 100;
                
                this.treeSvg.setAttribute('width', width);
                this.treeSvg.setAttribute('height', height);
                
                // Draw nodes for current steps
                for (let i = 0; i <= this.currentStep; i++) {
                    const step = this.steps[i];
                    if (step.action === 'add_subset') {
                        this.drawNode(step.x + width/2, step.y + 50, step.subset, i === this.currentStep);
                    }
                }
            }

            drawNode(x, y, subset, isActive = false) {
                // Create group for node
                const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                g.setAttribute('class', `tree-node ${isActive ? 'active' : ''}`);
                
                // Create circle
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', x);
                circle.setAttribute('cy', y);
                circle.setAttribute('r', 25);
                circle.setAttribute('stroke', isActive ? '#f59e0b' : '#6b7280');
                circle.setAttribute('fill', isActive ? '#fef9c3' : 'white');
                
                // Create text
                const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                text.setAttribute('x', x);
                text.setAttribute('y', y + 4);
                text.textContent = `[${subset.join(',')}]`;
                text.setAttribute('font-size', '10');
                text.setAttribute('text-anchor', 'middle');
                
                g.appendChild(circle);
                g.appendChild(text);
                this.treeSvg.appendChild(g);
            }

            updateResults() {
                const currentResults = this.result.slice(0, Math.floor(this.currentStep / 3) + 1);
                this.results.innerHTML = currentResults.map(subset => 
                    `<span class="result-subset">[${subset.join(', ')}]</span>`
                ).join('');
            }

            logMessage(message) {
                const logEntry = document.createElement('div');
                logEntry.textContent = `> ${message}`;
                this.log.appendChild(logEntry);
                this.log.scrollTop = this.log.scrollHeight;
            }

            togglePlay() {
                if (this.isPlaying) {
                    this.pause();
                } else {
                    this.play();
                }
            }

            play() {
                this.isPlaying = true;
                this.playIcon.style.display = 'none';
                this.pauseIcon.style.display = 'block';
                
                this.playInterval = setInterval(() => {
                    if (this.currentStep < this.steps.length - 1) {
                        this.nextStep();
                    } else {
                        this.pause();
                    }
                }, 1500);
            }

            pause() {
                this.isPlaying = false;
                this.playIcon.style.display = 'block';
                this.pauseIcon.style.display = 'none';
                
                if (this.playInterval) {
                    clearInterval(this.playInterval);
                }
            }

            nextStep() {
                if (this.currentStep < this.steps.length - 1) {
                    this.currentStep++;
                    this.renderStep();
                }
            }

            previousStep() {
                if (this.currentStep > 0) {
                    this.currentStep--;
                    this.renderStep();
                }
            }
        }

        // Initialize the visualizer when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new SubsetsVisualizer();
        });
    </script>
</body>
</html>